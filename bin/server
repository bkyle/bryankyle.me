#!/bin/sh

ABS_PATH=$(cd $(dirname $0); pwd)

set -x

case $1 in
	start)
		sudo docker run -v "$ABS_PATH/../usr/share/nginx/html:/usr/share/nginx/html:ro" -p 80:80 -d nginx 1>$ABS_PATH/pidfile
		;;
	stop)
		sudo docker kill $(cat $ABS_PATH/pidfile) > /dev/null
		;;
	restart|reload)
		$0 stop
		$0 start
		;;
	refresh)
		(cd $ABS_PATH/..; git pull)
		;;
	*)
		echo "$0 (start|stop|restart|reload|refresh)"
		;;
esac
